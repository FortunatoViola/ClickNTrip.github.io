<!DOCTYPE html>
<html>
    <head>
        <title>Annunci</title>
        <meta charset="utf-8">
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel='icon' sizes='32x32 64x64' href='immagini/favicon.ico'>

        <meta name='robots' content='noindex, nofollow'>
        <meta name='keywords' content='...'>
        <meta name='description' content='...'>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
        <script src="path/to/javascripts/bootstrap-rating-input.min.js" type="text/javascript"></script>
    </head>
        

    <body>

        <div class="container-fluid">
            <div class="row">

                <div id="header" class="carousel slide carousel-fade" data-ride="carousel" data-pause="false" data-interval="3000">
                
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="immagini/pantelleria.jpg" class="w-100" alt="Pantelleria">
                        </div>
                        <div class="carousel-item">
                            <img src="immagini/palermoCattedrale.jpg" class="w-100" alt="Palermo">
                        </div>
                        <div class="carousel-item">
                            <img src="immagini/acitrezza.jpg" class="w-100" alt="Acitrezza">
                        </div>
                        <div class="carousel-item">
                            <img src="immagini/scala_dei_turchi.jpg" class="w-100" alt="Agrigento">
                        </div>
                        <div class="carousel-item">
                            <img src="immagini/cefalù3.jpg" class="w-100" alt="Cefalù">
                        </div>
                        <div class="carousel-item">
                            <img src="immagini/mondello.jpg" class="w-100" alt="Palermo">
                        </div>
                        
                        <a class="carousel-control-prev" href="#header" data-slide-to="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </a>
                        <a class="carousel-control-next" href="#header" data-slide-to="next">
                            <span class="carousel-control-next-icon"></span>
                        </a>
                    </div>
    
                    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
                        <a class="navbar-brand text-success text-uppercase mx-2" style="font-size: 2rem; font-style: oblique; font-weight: bold;" href="/home" data-toggle="tooltip" title="Home Page"><img src='immagini/favicon.ico' class="rounded">  Click&Trip</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="collapsibleNavbar">
                            <ul class="navbar-nav offset-xl-9 offset-lg-8 offset-md-6">
                                <li class="nav-item p-1 m-2">
                                    <a href="/access_form">
                                    <button class="btn btn-primary btn-block" type="button" >Accedi</button> </a>
                                </li>
                                <li class="nav-item p-1 m-2">
                                    <a href="/register_form">
                                    <button class="btn btn-primary btn-block" type="button">Registrati</button>
                                    </a>
                                </li>
                              </ul>
                          </div>
                    </nav>
    
                </div>

                <div class="alert alert-warning col-sm-12 text-center">
                    <strong>Registrati per avere accesso alle funzionalità del nostro sito</strong> 
                </div>

                
                <div class="jumbotron bg-warning col-lg-3 col-md-4 m-2 h-75">
                    <h2 class="text text-center col-12">Filtra Annunci</h2>

                    
                    <form class="col-12 mt-5" id="filtri">
                            
                        <h4 class="text text-center">Tipo Struttura</h4>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="tipo" value="beb" id="beb" onclick="Comfort()">
                            <label class="custom-control-label" for="beb">B&B</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="tipo" value="casav" id="casav" onclick="Comfort()">
                            <label class="custom-control-label" for="casav">Casa Vacanze</label>
                        </div>

                        <hr color="black">
                        <h4 class="text text-center mt-3">Comfort</h4>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="comfort" id="wifi" value="wifi" onclick="Comfort()">
                            <label class="custom-control-label" for="wifi">Wi-Fi</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="comfort" id="parcheggio" value="parcheggio" onclick="Comfort()">
                            <label class="custom-control-label" for="parcheggio">Parcheggio</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="comfort" id="ariacondizionata" value="aria" onclick="Comfort()">
                            <label class="custom-control-label" for="ariacondizionata">Aria Condizionata</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="comfort" id="piscina" value="piscina" onclick="Comfort()">
                            <label class="custom-control-label" for="piscina">Piscina</label>
                        </div>

                        <hr color="black">
                        <h4 class="text text-center mt-3">Distanza dal Centro</h4>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="0-500m" id="500" onclick="Comfort()">
                            <label class="custom-control-label" for="500">0 - 500m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="500m-1000m" id="1000" onclick="Comfort()">
                            <label class="custom-control-label" for="1000">500m - 1000m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="1000m-1500m" id="1500" onclick="Comfort()">
                            <label class="custom-control-label" for="1500">1000m - 1500m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="1500m-2000m" id="2000" onclick="Comfort()">
                            <label class="custom-control-label" for="2000">1500m - 2000m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="2000m-2500m" id="2500" onclick="Comfort()">
                            <label class="custom-control-label" for="2500">2000m - 2500m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="2500m-3000m" id="3000" onclick="Comfort()">
                            <label class="custom-control-label" for="3000">2500m - 3000m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="3000m-3500m" id="3500" onclick="Comfort()">
                            <label class="custom-control-label" for="3500">3000m - 3500m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="3500m-4000m" id="4000" onclick="Comfort()">
                            <label class="custom-control-label" for="4000">3500m - 4000m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="4000m-4500m" id="4500" onclick="Comfort()">
                            <label class="custom-control-label" for="4500">4000m - 4500m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value="4500m-5000m" id="5000" onclick="Comfort()">
                            <label class="custom-control-label" for="5000">4500m - 5000m</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" name="distanza" value=">5000m" id="5500" onclick="Comfort()">
                            <label class="custom-control-label" for="5500"> > 5000m</label>
                        </div>

                    </form>
                </div>
                

                <div id="annunci" class="jumbotron bg-white col-lg-8 col-md-7 mx-auto mt-2" data-length="<%=Annuncio.length%>"> 
                    <h2 class="text text-center col-12">Risultati Ricerca</h2>

                    <%for(var i = 0; i < Annuncio.length; i++){%>  
                    <div id="<%=i%>"  data-type="<%=Annuncio[i].TipoStruttura%>" data-wifi="<%=Annuncio[i].Wifi%>" data-piscina="<%=Annuncio[i].Piscina%>" data-parcheggio="<%=Annuncio[i].Parcheggio%>" data-aria="<%=Annuncio[i].AriaCondizionata%>" data-distanz="<%=Annuncio[i].Posizione%>">    
                    <div class="container-fluid m-2 mt-4 bg-primary rounded p-1">
                        <a href="/effettua_prenotazione?id=<%=Annuncio[i].ID_STRUTTURA%>&camere=<%=Annuncio[i].ref_id_account%>" style="color:white;background-color: transparent;">
                            <h4><%= Annuncio[i].NomeStruttura %></h4>
                            </a>
                            <span class="badge badge-primary">
                                <%if(Annuncio[i].Voto >=1) {%><i class="fas fa-star"></i> <%} else {%><i class="fas fa-star-fill"></i> <%}%>
                                <%if(Annuncio[i].Voto >=2) {%><i class="fas fa-star"></i> <%} else {%><i class="fas fa-star-fill"></i> <%}%>
                                <%if(Annuncio[i].Voto >=3) {%><i class="fas fa-star"></i> <%} else {%><i class="fas fa-star-fill"></i> <%}%>
                                <%if(Annuncio[i].Voto >=4) {%><i class="fas fa-star"></i> <%} else {%><i class="fas fa-star-fill"></i> <%}%>
                                <%if(Annuncio[i].Voto >=5) {%><i class="fas fa-star"></i> <%} else {%><i class="fas fa-star-fill"></i> <%}%>
                            </span>
                            
                        </div>
                        
                        <div class="d-flex align-content-start flex-wrap bg-light">
                            <div class="p-2 col-5">
                                <a href="/effettua_prenotazione?id=<%=Annuncio[i].ID_STRUTTURA%>&camere=<%=Annuncio[i].ref_id_account%>">
                            <img src=<%= Annuncio[i].Foto_struttura %> alt="casa" class="img-thumbnail" style="max-width: 100%;">
                                </a>
                            </div>
                            <div class="p-2 col-7">
                                <h4>Descrizione</h4>
                                <p><%= Annuncio[i].Descrizione %></p>
                            </div>
                        </div>
                        
                        <div class="alert alert-danger text-center">
                            <strong>I prezzi NON comprendono le tasse di soggiorno!</strong> 
                        </div>

                        <%if(Annuncio[i].TipoStruttura == 0){%>
                        <div class="col-12">
                            <h4 class="text-center">Prezzi per notte</h4>
                        </div>

                        <div class="table-responsive-lg">
                            <table class="table text-center" >
                                <thead class="thead-light text-center">
                                    <tr>
                                        <th>Camera Singola</th>
                                        <th>Camera Doppia</th>
                                        <th>Camera tripla</th>
                                    </tr>
                                </thead>
                                <body>
                                    <tr>
                                        <td><%= Annuncio[i].PrezzoS%></td>
                                        <td><%= Annuncio[i].PrezzoD%></td>
                                        <td><%= Annuncio[i].PrezzoT%></td>
                                    </tr>
                                </body>
                            </table>
                        </div>
                        
                    <%}%>
                            
                        <%if(Annuncio[i].TipoStruttura == 1){%>
                        <div>
                            <h4 class="text-center">Prezzo per notte</h4>
                            <p class="text-center"><%=Annuncio[i].Prezzo%></p>                               
                        </div>  
                        <%}%>    
                    </div>
                     
                    <%}%> 
                    
                    </div>
                    
                

                <div class="jumbotron text-center py-3 col-12" style="margin-bottom: 0;">
                
                    <div class="col-12">
                        <p class="lead">Contatti</p>
                        <p><i class="fas fa-envelope"></i>
                            <a href="mailto:clikandtrip@gmail.com">clickandtrip@gmail.com</a>
                        </p>
                    </div>
                    <p class="font-italic" style="font-size: 1.1rem;">&copy; Nicolò Ditta &copy; Marco Galbo &copy; Marco Stallone &copy; Fortunato Viola</p>
                      
                </div>
                
               </div>
        </div>
    </body>
    
    <script>
    var length = document.getElementById('annunci').dataset.length;
    var distanza =new Array(length);
    for(i=0;i<length;i++)
    {
         distanza[i]=document.getElementById(i).dataset.distanz;
    }

    
    
    function Comfort()
    {    var d=false;
        for(var i=0;i<document.getElementsByName("distanza").length;i++)
        {
            if(document.getElementsByName("distanza")[i].checked==true)
            {
                 d=true;
                 var value=document.getElementsByName("distanza")[i].value;
            }

        }
        for(var i=0;i<length;i++){
           
            var Annuncio=document.getElementById(i);
            Annuncio.removeAttribute("hidden");
            
           

            if(document.getElementById("beb").checked==true)
            {
                if(document.getElementById(i).dataset.type!=0)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            if(document.getElementById("casav").checked==true)
            {
                if(document.getElementById(i).dataset.type!=1)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            if(document.getElementById("wifi").checked==true)
            {
                if(document.getElementById(i).dataset.wifi!=1)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            if(document.getElementById("piscina").checked==true)
            {
                if(document.getElementById(i).dataset.piscina!=1)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            if(document.getElementById("ariacondizionata").checked==true)
            {
                if(document.getElementById(i).dataset.aria!=1)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            if(document.getElementById("parcheggio").checked==true)
            {
                if(document.getElementById(i).dataset.parcheggio!=1)
                {
                    Annuncio.setAttribute("hidden","");
                }
                
            }
            
            if(d)
            { 
                if(distanza[i]!=value)
                {   
                    
                    Annuncio.setAttribute("hidden","");
                
                }
            }
        }

 }
 


          

       
    </script>

</html>